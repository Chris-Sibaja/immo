{"version":3,"sources":["../../src/pages/map-inventory/map-inventory.module.ts","../../src/pages/map-inventory/map-inventory.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { MapInventoryPage } from './map-inventory';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    MapInventoryPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(MapInventoryPage),\r\n  ],\r\n})\r\nexport class MapInventoryPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/map-inventory/map-inventory.module.ts","import { Component, Input, ViewChild, ElementRef } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, MenuController, Platform, ToastController, AlertController } from 'ionic-angular';\r\nimport { Properties } from '../../providers';\r\nimport { PopoverController } from 'ionic-angular';\r\nimport { SplashScreen } from '@ionic-native/splash-screen';\r\nimport { Geolocation } from '@ionic-native/geolocation';\r\n\r\ndeclare var google: any;\r\ndeclare var H: any;\r\n\r\ndeclare var MarkerCluster: any;\r\ndeclare var MarkerClusterer: any;\r\n\r\n\r\n@IonicPage()\r\n@Component({\r\n   selector: 'page-map-inventory',\r\n  templateUrl: 'map-inventory.html',\r\n})\r\nexport class MapInventoryPage {\r\n\r\n  @ViewChild(\"map\")\r\n  public mapElement: ElementRef;\r\n\r\n  @Input()\r\n  public appId = 'uYrt36TOhwviFRYoJgXV';\r\n\r\n  @Input()\r\n  public appCode = 'dfsfKzKlWfZg4tyBGmPeQQ';\r\n\r\n  public userPos : any ;\r\n\r\n  public userMark : any;\r\n  public userMarkCors: any;\r\n\r\n\r\n  public hiddenRoutes = '';\r\n\r\n\r\n  public routeMark: any;\r\n  public routeMarkCors: any;\r\n  public platformMap : any ;\r\n\r\n  public seccion = 1;\r\n  public routing = \"fastest;car\";\r\n\r\n\r\n  /**------------------------ */\r\n  public map: any; \r\n  public cluster : any ;\r\n  public mapstyle =[{\r\n                    featureType : \"poi.business\",\r\n                    elementType : \"labels\",\r\n                    stylers     : [{ visibility: \"off\" }]\r\n                  }];\r\n\r\n\r\n  /** Configuracion del mapa*/\r\n  public mapProp: any; \r\n\r\n  /** Indicaciones de navegacion hacia una direccion*/\r\n  public item: any;  \r\n\r\n  /** Contiene el texto a buscar y guarda ultimo texto buscado */\r\n  private textSearchbar: { currentSearch: string, lastSearch: string } = { currentSearch: '', lastSearch :''}\r\n\r\n  /** Clase autocompletar de google */\r\n  private googleAutocomplete: any;  \r\n\r\n  /** Elemento input searchbar */\r\n  private inputSearch: any;  \r\n  \r\n  public typeSearch :any ;\r\n\r\n  /** Atributos del autocompletar */\r\n  private optionsAc = { componentRestrictions: { country: \"mx\" } };                       \r\n\r\n\r\n  constructor(private geolocation: Geolocation,public alertCtrl : AlertController, public menu: MenuController, public popoverController: PopoverController, public SplashScreen: SplashScreen,  public properties : Properties, public platform: Platform, public navCtrl: NavController, public navParams: NavParams) {\r\n\r\n  }\r\n\r\n  center(){\r\n    this.map.setCenter(this.userPos);\r\n  }\r\n\r\n  ionViewWillEnter() {\r\n    this.setMarkersv2();\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    this.menu.enable(true);\r\n\r\n    /**Inicialica el mapa en la pagina. */\r\n    this.loadMap();\r\n  }\r\n \r\n  updateMarks(seccion){\r\n\r\n\r\n    this.hiddenRoutes = '';\r\n    this.map.removeObjects(this.map.getObjects());\r\n\r\n    let icon = new H.map.Icon('assets/icon/location2.png'), coords = this.userMarkCors;\r\n\r\n    this.userMark = new H.map.Marker(coords, { icon: icon });\r\n    this.userMark.id = 'user_location';\r\n    this.map.addObject(this.userMark);\r\n\r\n\r\n    this.setMarkersv2();\r\n   \r\n\r\n\r\n}\r\n\r\n  loadMap() {\r\n    //var mapEle: HTMLElement = document.getElementById('mapa2');    \r\n    //this.map = new google.maps.Map(mapEle, this.mapProp);\r\n\r\n    this.platformMap = new H.service.Platform({\r\n      \"app_id\": this.appId,\r\n      \"app_code\": this.appCode\r\n    });\r\n\r\n\r\n    //Configura la plataforma\r\n    var defaultLayers = this.platformMap.createDefaultLayers();\r\n\r\n    //let ui = H.ui.UI.createDefault(this.map, defaultLayers);\r\n    var $this = this;\r\n\r\n    this.geolocation.getCurrentPosition().then((resp) => {\r\n\r\n      $this.map = new H.Map(\r\n        document.getElementById('mapa'),\r\n        defaultLayers.normal.map,\r\n        {\r\n          zoom: 10,\r\n          center: { lat: resp.coords.latitude, lng: resp.coords.longitude }\r\n        }\r\n      );\r\n\r\n      //$this.map.addLayer(defaultLayers.normal.trafficincidents);\r\n\r\n      let icon = new H.map.Icon('assets/icon/location2.png'), coords = { lat: resp.coords.latitude, lng: resp.coords.longitude };\r\n      $this.userMark = new H.map.Marker(coords, { icon: icon });\r\n      $this.userMark.id = 'user_location';\r\n      $this.userMarkCors = coords;\r\n      $this.map.addObject($this.userMark);\r\n\r\n      $this.map.addEventListener('longpress', function (evt) {\r\n\r\n        var coord = $this.map.screenToGeo(evt.currentPointer.viewportX, evt.currentPointer.viewportY);\r\n\r\n\r\n\r\n        // Log 'tap' and 'mouse' events:\r\n\r\n        let icon = new H.map.Icon('assets/icon/location.png'), coords = { lat: Math.abs(coord.lat.toFixed(4)), lng: (-(Math.abs(coord.lng.toFixed(4))))};\r\n        $this.routeMark = new H.map.Marker(coords, { icon: icon });\r\n        $this.routeMark.id = 'location';\r\n        $this.routeMarkCors = coords;\r\n\r\n        $this.map.getObjects().forEach(element => {\r\n\r\n          if (element.id === 'location') {\r\n            $this.map.removeObject(element);\r\n          }\r\n        });\r\n\r\n\r\n        $this.map.getObjects().forEach(element => {\r\n\r\n          if (element.id === 'route') {\r\n            $this.map.removeObject(element);\r\n          }\r\n        });\r\n\r\n\r\n        $this.map.addObject($this.routeMark);\r\n        $this.route($this.routeMarkCors);\r\n      });\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n      $this.userPos = { lat: resp.coords.latitude, lng: resp.coords.longitude };\r\n      let behavior = new H.mapevents.Behavior(new H.mapevents.MapEvents($this.map));\r\n\r\n    }).catch((error) => {\r\n    });\r\n\r\n\r\n    //this.autocompleteInit();\r\n\r\n\r\n  }\r\n\r\n\r\n  setMarkersv2(){\r\n\r\n    var properties : any ;\r\n\r\n    if(this.seccion == 1){\r\n    properties = this.properties.seccion_1;\r\n\r\n    }else if(this.seccion == 2){\r\n      properties = this.properties.seccion_2;\r\n\r\n    } else if (this.seccion == 3) {\r\n      properties = this.properties.seccion_3;\r\n\r\n    }else if(this.seccion == 4){\r\n      properties = this.properties.seccion_4;\r\n\r\n    } else if (this.seccion == 5) {\r\n      properties = this.properties.seccion_5;\r\n\r\n    }\r\n\r\n\r\n    var markers: any = [];\r\n    var $this = this;\r\n\r\n    for (var i = 0; i < properties.length; i++) {\r\n\r\n      console.log('ocultando rutas');\r\n      console.log(properties[i]['mark'].getPosition().lat + ',' + properties[i]['mark'].getPosition().lng);\r\n\r\n      this.hiddenRoute(properties[i]['mark'].getPosition().lat + ',' + properties[i]['mark'].getPosition().lng)\r\n       \r\n    \r\n\r\n      var marker = properties[i]['mark'];\r\n\r\n      markers.push(marker);                                            \r\n      $this.map.addObject(marker);\r\n    }\r\n\r\n\r\n  }\r\n    \r\n  updateRouting(){\r\n    var $this = this;\r\n    \r\n    this.map.getObjects().forEach(element => {\r\n      if (element.id === 'route') {\r\n        $this.map.removeObject(element);\r\n      }\r\n    });\r\n\r\n    this.route(this.routeMarkCors);\r\n  }\r\n\r\n  route(waypoint) {\r\n\r\n    var cor = waypoint.lat + ',' + waypoint.lng; \r\n\r\n    var $this = this;\r\n\r\n    var onResult = function (result) {\r\n\r\n      var route,        routeShape,        startPoint,        endPoint,        linestring;\r\n      if (result.response.route) {\r\n\r\n        route       = result.response.route[0];\r\n        routeShape  = route.shape;\r\n        linestring = new H.geo.LineString();\r\n        linestring.id = 'route';\r\n\r\n        routeShape.forEach(function (point) {\r\n          var parts = point.split(',');\r\n          linestring.pushLatLngAlt(parts[0], parts[1]);\r\n        });\r\n\r\n        // Retrieve the mapped positions of the requested waypoints:\r\n        startPoint = route.waypoint[0].mappedPosition;\r\n        endPoint = route.waypoint[1].mappedPosition;\r\n\r\n        // Create a polyline to display the route:\r\n        var routeLine = new H.map.Polyline(linestring, {\r\n          style: { lineWidth: 4 }\r\n        });\r\n        routeLine.setArrows({ fillColor: 'white', frequency: 5, width: 1, length: 1 });\r\n        routeLine.id = 'route';\r\n        //$this.removeObjectById();\r\n\r\n        // crea marcadores y los agrega\r\n        // Add the route polyline and the two markers to the map:\r\n\r\n        $this.map.addObjects([routeLine]);\r\n\r\n        // Set the map's viewport to make the whole route visible:\r\n        $this.map.setViewBounds(routeLine.getBounds());\r\n      }\r\n    };\r\n\r\n\r\n    // Get an instance of the routing service:\r\n    var router = this.platformMap.getRoutingService();\r\n\r\n\r\n\r\n    var routingParameters = {\r\n      'mode': this.routing,\r\n      'waypoint0': 'geo!' + this.userPos.lat + ',' + this.userPos.lng,\r\n      'waypoint1': 'geo!' + cor,\r\n      'avoidlinks': this.hiddenRoutes,\r\n      'representation': 'display'\r\n    };\r\n    console.log(routingParameters);\r\n    router.calculateRoute(routingParameters, onResult,\r\n      function (error) {\r\n        alert(error.message);\r\n      });\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  hiddenRoute(waypoint) {\r\n \r\n    var routingParameters2 = {\r\n      'mode': this.routing,\r\n      'waypoint0': 'geo!' + waypoint,\r\n      'waypoint1': 'geo!'+ waypoint,\r\n      'representation': 'display'\r\n    };\r\n\r\n \r\n    var $this = this;\r\n\r\n    var onResult2 = function (result) {\r\n\r\n      if ($this.hiddenRoutes == '') {\r\n        $this.hiddenRoutes = result.response.route[0].waypoint[0].linkId\r\n      } else {\r\n        $this.hiddenRoutes = $this.hiddenRoutes  + ',' + result.response.route[0].waypoint[0].linkId;\r\n\r\n      }\r\n      console.log($this.hiddenRoutes)\r\n    };\r\n\r\n\r\n    // Get an instance of the routing service:\r\n    var router = this.platformMap.getRoutingService();\r\n    console.log('calculando rutas', routingParameters2);\r\n    router.calculateRoute(routingParameters2, onResult2,\r\n      function (error) {\r\n        alert(error.message);\r\n      });\r\n\r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/map-inventory/map-inventory.ts"],"sourceRoot":""}