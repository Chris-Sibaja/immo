{"version":3,"sources":["../../src/pages/profile/profile.module.ts","../../src/pages/profile/profile.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACR;AAUxC;IAAA;IAAgC,CAAC;IAApB,iBAAiB;QAR7B,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,6DAAW;aACZ;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,6DAAW,CAAC;aACtC;SACF,CAAC;OACW,iBAAiB,CAAG;IAAD,wBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;ACZqC;AACwD;AACtB;AACL;AACN;AACT;AAC9B;AAQnD;IAaE,qBAAoB,QAAkB,EAAW,GAAS,EAAS,KAAY,EAAU,UAAsB,EAAU,YAA0B,EAAU,QAAmB,EAAU,MAAe,EAAU,QAAsB,EAAU,SAA0B,EAAS,WAAwB,EAAU,eAAsC,EAAU,MAAc,EAAS,IAAU,EAAS,OAAsB,EAAS,SAAoB,EAAS,IAAoB;QAAle,iBAwDC;QAxDmB,aAAQ,GAAR,QAAQ,CAAU;QAAW,QAAG,GAAH,GAAG,CAAM;QAAS,UAAK,GAAL,KAAK,CAAO;QAAU,eAAU,GAAV,UAAU,CAAY;QAAU,iBAAY,GAAZ,YAAY,CAAc;QAAU,aAAQ,GAAR,QAAQ,CAAW;QAAU,WAAM,GAAN,MAAM,CAAS;QAAU,aAAQ,GAAR,QAAQ,CAAc;QAAU,cAAS,GAAT,SAAS,CAAiB;QAAS,gBAAW,GAAX,WAAW,CAAa;QAAU,oBAAe,GAAf,eAAe,CAAuB;QAAU,WAAM,GAAN,MAAM,CAAQ;QAAS,SAAI,GAAJ,IAAI,CAAM;QAAS,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAAW;QAAS,SAAI,GAAJ,IAAI,CAAgB;QAL3d,gBAAW,GAAY,EAAE,CAAC;QAO/B,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,IAAI,CAAC,CAAC,EAAC;YAC5B,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,2BAA2B,CAAC;QACpD,CAAC;QAED,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC;QAEvC,IAAI,CAAC,IAAI,GAAG,WAAW,CAAC,KAAK,CAAC;YAC5B,UAAU,EAAE,CAAC,EAAE,CAAC;SACjB,CAAC,CAAC;QAEH,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,UAAC,CAAC;YACjC,KAAI,CAAC,aAAa,GAAG,KAAI,CAAC,IAAI,CAAC,KAAK,CAAC;QACvC,CAAC,CAAC,CAAC;QAGH,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,YAAY,EAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAG,CAAC,CAAC;QAI9D,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,IAAI,CAAC,CAAC,CAAC,CAAC;YAEvC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;gBAE7F,IAAI,CAAC,WAAW,GAAG,cAAc,CAAC;YAEpC,CAAC;YAAC,IAAI,CAAC,CAAC;gBAEN,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;oBAChD,IAAI,CAAC,WAAW,IAAI,yBAAyB,CAAC;gBAChD,CAAC;gBAED,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;oBACjD,IAAI,CAAC,WAAW,IAAI,oBAAoB,CAAC;gBAC3C,CAAC;YAEH,CAAC;QAGH,CAAC;QAED,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,IAAI,GAAG,CAAC,CAAC,CAAC;YACzC,iBAAiB;QAEnB,CAAC;QAED,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,IAAI,CAAC,CAAC,CAAC,CAAC;YACvC,iBAAiB;QAEnB,CAAC;QAED,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,IAAI,GAAG,CAAC,CAAC,CAAC;YACzC,iBAAiB;QAEnB,CAAC;IACH,CAAC;IAID,qCAAe,GAAf;QAAA,iBAyCC;QAvCC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAEvB,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,UAAC,KAAK;YAEpC,EAAE,CAAC,CAAC,KAAK,CAAC,UAAU,IAAI,CAAC,CAAC,CAAC,CAAC;gBAC1B,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;oBACtB,KAAI,CAAC,EAAE,GAAG,IAAI,CAAC;gBACjB,CAAC;gBAAC,IAAI,EAAC;oBACL,KAAI,CAAC,EAAE,GAAG,KAAK,CAAC;gBACjB,CAAC;YACJ,CAAC;YAED,EAAE,CAAC,CAAC,KAAK,CAAC,UAAU,IAAI,EAAE,CAAC,CAAC,CAAC;gBAC3B,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;oBACtB,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC;gBACrB,CAAC;gBAAC,IAAI,EAAC;oBACN,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;gBACvB,CAAC;YACH,CAAC;YAED,EAAE,CAAC,CAAC,KAAK,CAAC,UAAU,IAAI,EAAE,CAAC,CAAC,CAAC;gBAC3B,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;oBACtB,KAAI,CAAC,GAAG,GAAG,IAAI,CAAC;gBAClB,CAAC;gBAAA,IAAI,EAAC;oBACJ,KAAI,CAAC,GAAG,GAAG,KAAK,CAAC;gBACnB,CAAC;YACH,CAAC;YAED,EAAE,CAAC,CAAC,KAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,IAAI,EAAE,CAAC,CAAC,CAAC;gBACpC,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YACtB,CAAC;QAEH,CAAC,CAAC,CAAC;QAEH,6CAA6C;IAK/C,CAAC;IAED,8BAAQ,GAAR;QAAA,iBAUC;QARC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC;QAEpC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAE,cAAI;YACzB,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;YACzC,KAAI,CAAC,eAAe,EAAE,CAAC;QAEzB,CAAC,CAAC,CAAC;IAEL,CAAC;IAED,gCAAU,GAAV;QAAA,iBA0DC;QAxDC,IAAI,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;YAC5C,KAAK,EAAE,sBAAsB;YAC7B,OAAO,EAAE;gBACP;oBACE,IAAI,EAAE,SAAS;oBACf,OAAO,EAAE;wBACP,KAAI,CAAC,SAAS,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;oBACvC,CAAC;iBACF;gBACD;oBACE,IAAI,EAAE,QAAQ;oBACd,OAAO,EAAE;wBACP,KAAI,CAAC,MAAM,CAAC,UAAU,CAAC,EAAE,eAAe,EAAE,KAAI,CAAC,MAAM,CAAC,eAAe,CAAC,QAAQ,EAAE,WAAW,EAAE,GAAG,EAAE,YAAY,EAAE,GAAG,EAAE,kBAAkB,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI;4BACzJ,KAAI,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,YAAY,EAAE,wBAAwB,GAAG,IAAI,EAAE,CAAC,CAAC;4BAExE,IAAI,KAAK,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gCAChC,KAAK,EAAE,WAAW;gCAClB,OAAO,EAAE,4BAA4B;gCACrC,OAAO,EAAE;oCACP;wCACE,IAAI,EAAE,UAAU;wCAChB,IAAI,EAAE,QAAQ;wCACd,OAAO,EAAE;4CACP,KAAI,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,YAAY,EAAE,wBAAwB,GAAG,IAAI,EAAG,CAAC,CAAC;wCAC3E,CAAC;qCACF;oCACD;wCACE,IAAI,EAAE,SAAS;wCACf,OAAO,EAAE;4CACP,KAAI,CAAC,WAAW,GAAG,KAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC;4CAC1D,KAAI,CAAC,WAAW,EAAE,CAAC;wCACrB,CAAC;qCACF;iCACF;6BACF,CAAC,CAAC;4BACH,KAAK,CAAC,OAAO,EAAE,CAAC;wBAGlB,CAAC,EAAE,UAAC,GAAG;4BAEL,KAAK,CAAC,kCAAkC,CAAC,CAAC;wBAE5C,CAAC,CAAC,CAAC;oBACL,CAAC;iBACF;gBACD;oBACE,IAAI,EAAE,UAAU;oBAChB,IAAI,EAAE,QAAQ;iBACf;aACF;SACF,CAAC,CAAC;QAEH,WAAW,CAAC,OAAO,EAAE,CAAC;IAIxB,CAAC;IAED,qCAAe,GAAf,UAAgB,KAAK;QAArB,iBAwCC;QAtCC,IAAI,MAAM,GAAG,IAAI,UAAU,EAAE,CAAC;QAE9B,MAAM,CAAC,MAAM,GAAG,UAAC,WAAW;YAE1B,IAAI,SAAS,GAAI,WAAW,CAAC,MAAc,CAAC,MAAM,CAAC;YAEnD,KAAI,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,YAAY,EAAE,SAAS,EAAE,CAAC,CAAC;YAGlD,IAAI,KAAK,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gBAChC,KAAK,EAAE,WAAW;gBAClB,OAAO,EAAE,4BAA4B;gBACrC,OAAO,EAAE;oBACP;wBACE,IAAI,EAAE,UAAU;wBAChB,IAAI,EAAE,QAAQ;wBACd,OAAO,EAAE;4BACP,KAAI,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,YAAY,EAAE,KAAI,CAAC,WAAW,EAAE,CAAC,CAAC;wBAC3D,CAAC;qBACF;oBACD;wBACE,IAAI,EAAE,SAAS;wBACf,OAAO,EAAE;4BACP,KAAI,CAAC,WAAW,GAAG,KAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC;4BAC1D,KAAI,CAAC,WAAW,EAAE,CAAC;4BACnB,KAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,KAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC;wBACpE,CAAC;qBACF;iBACF;aACF,CAAC,CAAC;YAEH,KAAK,CAAC,OAAO,EAAE,CAAC;QAElB,CAAC,CAAC;QAEF,MAAM,CAAC,aAAa,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;IAG9C,CAAC;IAED,0CAAoB,GAApB;QAEE,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,KAAK,GAAG,GAAG,CAAC;IAE/D,CAAC;IAED,iCAAW,GAAX;QAAA,iBAqCC;QAnCC,IAAI,OAAO,GAAG;YACZ,OAAO,EAAG,OAAO;YACjB,QAAQ,EAAE,OAAO;YACjB,WAAW,EAAE,KAAK;YAClB,QAAQ,EAAE,qBAAqB;YAC/B,MAAM,EAAE;gBACN,GAAG,EAAE,SAAS;gBACd,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM;aAClC;SACF,CAAC;QAGF,IAAI,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC;QACxD,IAAI,YAAY,GAAuB,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;QAE9D,YAAY,CAAC,MAAM,CAAC,UAAU,EAAE,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC,IAAI,CAAC,cAAI;YAE9D,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,IAAI,GAAG,CAAC,CAAC,CAAC;gBAE7B,IAAI,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAEzC,EAAE,CAAC,CAAC,QAAQ,CAAC,MAAM,IAAI,GAAG,CAAC,CAAC,CAAC;gBAE7B,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,KAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;gBACvB,CAAC;YAEH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;YACvB,CAAC;QAEH,CAAC,EAAE,aAAG;YACJ,KAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QACvB,CAAC,CAAC,CAAC;IAEL,CAAC;IAED,kCAAY,GAAZ;QAAA,iBA2BC;QAxBC,IAAI,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,kBAAkB,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAE/E,4CAA4C;QAC5C,OAAO,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,cAAI;YAE9B,oFAAoF;YACpF,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAEZ,IAAI,CAAC,GAAG,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;gBACvD,IAAI,CAAC,GAAG,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;gBAC7D,IAAI,CAAC,GAAG,KAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;gBACtD,IAAI,CAAC,GAAG,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;gBAC3D,IAAI,CAAC,GAAG,KAAI,CAAC,UAAU,CAAC,iBAAiB,EAAE,CAAC;gBAE5C,+FAA+F;gBAC/F,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,cAAI;oBACpC,KAAI,CAAC,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC;oBAC1B,KAAI,CAAC,eAAe,EAAE,CAAC;gBACzB,CAAC,CAAC,CAAC;YAEL,CAAC;QAEH,CAAC,CAAC,CAAC;IAEL,CAAC;IApSuB;QAAvB,yEAAS,CAAC,WAAW,CAAC;;kDAAW;IAVvB,WAAW;QALvB,wEAAS,CAAC;YACT,QAAQ,EAAE,cAAc;WACG;SAC5B,CAAC;oBAeke;OAbvd,WAAW,CA+SvB;IAAD,CAAC;AAAA;SA/SY,WAAW,e","file":"9.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ProfilePage } from './profile';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ProfilePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ProfilePage),\r\n  ],\r\n})\r\nexport class ProfilePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.module.ts","import { Component, ViewChild               } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, MenuController, ActionSheetController, AlertController, Platform } from 'ionic-angular';\r\nimport { User, Developments,Cities, Contacts, Properties, Api              } from '../../providers/';\r\nimport { Camera                             } from '../../../node_modules/@ionic-native/camera';\r\nimport { FormBuilder, FormGroup             } from '../../../node_modules/@angular/forms';\r\nimport { FileTransfer, FileTransferObject   } from '@ionic-native/file-transfer';\r\nimport { MyApp  }   from '../../app/app.component';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-profile',\r\n  templateUrl: 'profile.html',\r\n})\r\n\r\nexport class ProfilePage {\r\n\r\n  public doc     : any ;\r\n  public id      : any ;\r\n  public company : any ;\r\n  public isReadyToSave : boolean;\r\n  public form          : FormGroup;\r\n  public imgOriginal   : any;\r\n  public permissions : string = '';\r\n\r\n  @ViewChild('fileInput') fileInput;\r\n\r\n  \r\n  constructor(private platform: Platform   ,public api : Api, public myapp: MyApp, private properties: Properties, private developments: Developments, private contacts : Contacts, private cities : Cities, private transfer: FileTransfer, private alertCtrl: AlertController, public formBuilder: FormBuilder, private actionSheetCtrl: ActionSheetController, private camera: Camera, public user: User, public navCtrl: NavController, public navParams: NavParams, public menu: MenuController) {\r\n\r\n    if (user.userInfo.image == 0){\r\n      user.userInfo.image = '../assets/img/profile.jpg';\r\n    }\r\n\r\n    this.imgOriginal = user.userInfo.image;\r\n\r\n    this.form = formBuilder.group({\r\n      profilePic: ['']\r\n    });\r\n\r\n    this.form.valueChanges.subscribe((v) => {\r\n      this.isReadyToSave = this.form.valid;\r\n    });\r\n\r\n\r\n    this.form.patchValue({ 'profilePic':  user.userInfo.image  });\r\n\r\n\r\n\r\n    if (this.user.userInfo.permission == 3) {\r\n\r\n      if (this.user.userInfo.idPermisos.includes('0') && this.user.userInfo.idPermisos.length == 1) {\r\n\r\n        this.permissions = 'Sin permisos';\r\n\r\n      } else {\r\n\r\n        if (this.user.userInfo.idPermisos.includes('3')) {\r\n          this.permissions += 'Alta de  Propiedades - ';\r\n        }\r\n\r\n        if (this.user.userInfo.idPermisos.includes('14')) {\r\n          this.permissions += 'Alta de  Contactos';\r\n        }\r\n\r\n      }\r\n\r\n\r\n    }\r\n\r\n    if (this.user.userInfo.permission == '3') {\r\n      //console.log(1);\r\n\r\n    }\r\n\r\n    if (this.user.userInfo.permission == 3) {\r\n      //console.log(2);\r\n\r\n    }\r\n\r\n    if (this.user.userInfo.permission == \"3\") {\r\n      //console.log(3);\r\n\r\n    }\r\n  }\r\n\r\n\r\n\r\n  ionViewDidEnter() {\r\n\r\n    this.menu.enable(true);\r\n\r\n    this.user.userDocuments.forEach((value) => {\r\n\r\n      if (value.documentid == 4) {\r\n        if (value.status == 1) { \r\n          this.id = true; \r\n        } else{ \r\n          this.id = false;\r\n         }\r\n      }\r\n\r\n      if (value.documentid == 13) {\r\n        if (value.status == 1) { \r\n          this.company = true;\r\n         } else{\r\n          this.company = false;\r\n        }\r\n      }\r\n\r\n      if (value.documentid == 14) {\r\n        if (value.status == 1) { \r\n          this.doc = true; \r\n        }else{\r\n          this.doc = false; \r\n        }\r\n      }\r\n\r\n      if (this.user.userInfo.tipoid == 11) {\r\n        this.company = true;\r\n      }\r\n\r\n    });\r\n\r\n    //console.log(this.user.userInfo.idPermisos);\r\n\r\n \r\n\r\n\r\n  }\r\n\r\n  document(){\r\n\r\n    let a = this.user.updateDocuments();\r\n\r\n    Promise.all([a]).then( data => {\r\n      this.navCtrl.push('UploadDocumentsPage');\r\n      this.ionViewDidEnter();\r\n\r\n    });\r\n    \r\n  }\r\n\r\n  getPicture() {\r\n\r\n    let actionSheet = this.actionSheetCtrl.create({\r\n      title: 'Selecciona la fuente',\r\n      buttons: [\r\n        {\r\n          text: 'Galería',\r\n          handler: () => {\r\n            this.fileInput.nativeElement.click();\r\n          }\r\n        },\r\n        {\r\n          text: 'Cámara',\r\n          handler: () => {\r\n            this.camera.getPicture({ destinationType: this.camera.DestinationType.DATA_URL, targetWidth: 400, targetHeight: 400, correctOrientation: true }).then((data) => {\r\n              this.form.patchValue({ 'profilePic': 'data:image/jpg;base64,' + data });\r\n              \r\n              let alert = this.alertCtrl.create({\r\n                title: 'Confirmar',\r\n                message: '¿Cambiar imagen de perfil?',\r\n                buttons: [\r\n                  {\r\n                    text: 'Cancelar',\r\n                    role: 'cancel',\r\n                    handler: () => {\r\n                      this.form.patchValue({ 'profilePic': 'data:image/jpg;base64,' + data  });\r\n                    }\r\n                  },\r\n                  {\r\n                    text: 'Aceptar',\r\n                    handler: () => {\r\n                      this.imgOriginal = this.form.controls['profilePic'].value;\r\n                      this.uploadImage();\r\n                    }\r\n                  }\r\n                ]\r\n              });\r\n              alert.present();\r\n\r\n\r\n            }, (err) => {\r\n\r\n              alert('No se pudo seleccionar la imagen');\r\n\r\n            });\r\n          }\r\n        },\r\n        {\r\n          text: 'Cancelar',\r\n          role: 'cancel'\r\n        }\r\n      ]\r\n    });\r\n\r\n    actionSheet.present();\r\n\r\n\r\n\r\n  }\r\n\r\n  processWebImage(event) {\r\n\r\n    let reader = new FileReader();\r\n\r\n    reader.onload = (readerEvent) => {\r\n\r\n      let imageData = (readerEvent.target as any).result;\r\n\r\n      this.form.patchValue({ 'profilePic': imageData });\r\n\r\n  \r\n      let alert = this.alertCtrl.create({\r\n        title: 'Confirmar',\r\n        message: '¿Cambiar imagen de perfil?',\r\n        buttons: [\r\n          {\r\n            text: 'Cancelar',\r\n            role: 'cancel',\r\n            handler: () => {\r\n              this.form.patchValue({ 'profilePic': this.imgOriginal });\r\n            }\r\n          },\r\n          {\r\n            text: 'Aceptar',\r\n            handler: () => {\r\n              this.imgOriginal = this.form.controls['profilePic'].value;\r\n              this.uploadImage();\r\n              this.user.userInfo.image = this.form.controls['profilePic'].value;\r\n            }\r\n          }\r\n        ]\r\n      });\r\n\r\n      alert.present();\r\n\r\n    };\r\n\r\n    reader.readAsDataURL(event.target.files[0]);\r\n\r\n\r\n  }\r\n\r\n  getProfileImageStyle() {\r\n\r\n    return 'url(' + this.form.controls['profilePic'].value + ')';\r\n\r\n  }\r\n\r\n  uploadImage() {\r\n\r\n    var options = {\r\n      fileKey : \"image\",\r\n      fileName: 'image',\r\n      chunkedMode: false,\r\n      mimeType: \"multipart/form-data\",\r\n      params: {\r\n        'm': 'uAvatar',\r\n        'user': this.user.userInfo.userid,       \r\n      }\r\n    };\r\n\r\n\r\n    var targetPath = this.form.controls['profilePic'].value;\r\n    var fileTransfer: FileTransferObject = this.transfer.create();\r\n\r\n    fileTransfer.upload(targetPath, this.api.url, options).then(data => {\r\n     \r\n      if (data.responseCode == 200) {\r\n        \r\n        var response = JSON.parse(data.response);\r\n\r\n        if (response.status == 200) {\r\n\r\n        } else {\r\n          this.api.alert(1003);\r\n        }\r\n\r\n      } else {\r\n        this.api.alert(1002);\r\n      }\r\n\r\n    }, err => {\r\n      this.api.alert(1001);\r\n    });\r\n\r\n  }  \r\n\r\n  updateStatus(){\r\n  \r\n    \r\n    var promise = this.user.loginPromise('m=loginbt&token=' + this.user.userToken);\r\n\r\n    //Actualiza los datos de sesion del usuario.\r\n    Promise.all([promise]).then(data => {\r\n\r\n      //Si la sesion es correcta, carga los provides necesarios para iniciar la aplicacion\r\n      if (data[0]) {\r\n\r\n        var a = this.cities.init(this.user.userInfo.companyid);\r\n        var b = this.developments.init(this.user.userInfo.companyid);\r\n        var c = this.contacts.init(this.user.userInfo.userid);\r\n        var d = this.properties.init(this.user.userInfo.companyid);\r\n        var e = this.properties.getUserProperties();\r\n\r\n        //Espera la respuesta del servidor para los datos principales y despues oculta el splashScreen.\r\n        Promise.all([a, b, c, d, e]).then(data => {\r\n          this.myapp.sesion = false;\r\n          this.ionViewDidEnter();\r\n        });\r\n\r\n      }\r\n\r\n    });\r\n\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.ts"],"sourceRoot":""}