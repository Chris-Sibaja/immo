{"version":3,"sources":["../../src/pages/addlead/addlead.module.ts","../../src/pages/addlead/addlead.ts"],"names":[],"mappings":"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","file":"31.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\n\r\nimport { AddleadPage } from './addlead';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        AddleadPage,\r\n    ],\r\n    imports: [\r\n        IonicPageModule.forChild(AddleadPage),\r\n        TranslateModule.forChild()\r\n    ],\r\n    exports: [\r\n        AddleadPage\r\n    ]\r\n})\r\nexport class AddleadPageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/addlead/addlead.module.ts","import { Component                                            } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ViewController  } from 'ionic-angular';\r\nimport { Developments, Contacts, User, Inputs                         } from '../../providers';\r\nimport { FormBuilder, FormGroup, Validators                   } from '../../../node_modules/@angular/forms';\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-addlead',\r\n  templateUrl: 'addlead.html',\r\n})\r\nexport class AddleadPage {\r\n\r\n\r\n  spinner     = false;\r\n  btnAdd      = false;\r\n  data  : any = [] ;\r\n  devs : any = [];\r\n  msg   : any;\r\n public emailRequiered = '';\r\n  public cellphoneRequiered = '';\r\n  public leadForm : FormGroup;\r\n\r\n  constructor(public inputs : Inputs,public formBuilder: FormBuilder, public user  : User , public developments : Developments, public contacts : Contacts, public viewCtrl: ViewController, public navCtrl: NavController, public navParams: NavParams) {\r\n\r\n    this.leadForm = formBuilder.group({\r\n      name        : ['', [Validators.required]],\r\n      firstname   : ['', [Validators.required]],\r\n      lastname    : [''],\r\n      email       : ['',],\r\n      cellphone   : ['',],\r\n      type        : ['', [Validators.required]],\r\n      media       : ['', [Validators.required]],\r\n      submedia    : [''],\r\n      comment     : ['', [Validators.required]],\r\n      office      : ['', [Validators.required]],\r\n      user        : ['', [Validators.required]],\r\n\r\n    });\r\n\r\n    //Especifica el campo que valida repetidos.\r\n    if(this.user.userInfo.repeatType == 1){\r\n\r\n      this.leadForm.controls['email'].setValidators(Validators.required);\r\n      this.leadForm.controls['email'].setValidators(Validators.email);\r\n      this.emailRequiered = '*';\r\n    }else{\r\n      this.leadForm.controls['cellphone'].setValidators(Validators.required);\r\n      this.cellphoneRequiered = '*';\r\n\r\n    }\r\n\r\n    this.data.lastname = '';\r\n\r\n    if(this.user.userInfo.permission == 3){\r\n      //console.log('asesor');\r\n      this.data.user = this.user.userInfo.userid;\r\n      this.leadForm.controls['user'].disable();\r\n    }\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n  getSubContactMedia(id){\r\n    this.inputs.getSubContactMedia(id);\r\n  }\r\n\r\n  getAgents(office){\r\n    this.inputs.getAgents(this.user.userInfo, office)\r\n  }\r\n\r\n  updateDevs() {\r\n    this.devs = [];\r\n    this.developments.developments.forEach((value, key, index) => { \r\n      ////console.log(value.stateid, '- ', this.data.state);\r\n      \r\n      if(value.stateid == this.data.state){\r\n        ////console.log('yes');\r\n        this.devs.push(value)\r\n      }\r\n\r\n    });\r\n\r\n  }\r\n\r\n\r\n  ionViewDidLoad() {\r\n    this.btnAdd = false; \r\n  }\r\n  \r\n  add(){\r\n\r\n    this.spinner = true;\r\n\r\n    if(this.btnAdd){\r\n      return;\r\n    }\r\n\r\n    this.btnAdd       = true;\r\n    this.data.userid  = this.user.userInfo.userid;\r\n    this.data.token   = this.user.userInfo.token;\r\n    var msg           = this.contacts.add(this.data);\r\n\r\n    Promise.all([msg]).then (data => {\r\n\r\n      var $this = this;\r\n\r\n      if (data[0] == 200){\r\n\r\n        this.msg = 'Contacto creado con éxito';\r\n\r\n        setTimeout(c => {\r\n          this.viewCtrl.dismiss(this.data);\r\n        }, 500);\r\n\r\n      } else if (data[0] == 201) {\r\n\r\n        this.msg = 'El contacto ya se encuentra registrado, un administrador debe dar visto bueno a tu registro.';\r\n\r\n        setTimeout(() => {\r\n          $this.viewCtrl.dismiss(this.data);\r\n        }, 4000);\r\n\r\n      } else if (data[0] == 216){\r\n\r\n        this.msg = 'El contacto ya se encuentra registrado, pide informes a tu administrador.';\r\n\r\n        setTimeout(() => {\r\n          $this.viewCtrl.dismiss(this.data);\r\n        }, 4000);\r\n\r\n      }else{\r\n        this.msg = 'Ocurrió un problema al guardar tu contacto, intenta mas tarde';\r\n\r\n        setTimeout(() => {\r\n          $this.viewCtrl.dismiss(this.data);\r\n        }, 4000);\r\n      }\r\n\r\n      this.spinner = false;\r\n    \r\n    });   \r\n\r\n  }\r\n\r\n  cancel(){\r\n    this.viewCtrl.dismiss();\r\n  } \r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/addlead/addlead.ts"],"sourceRoot":""}