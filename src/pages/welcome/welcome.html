<ion-header>

</ion-header>

<ion-content>

  <ion-list class="main ">
    
      <ion-item class="title" color="transparent" no-padding no-margin>
      <div text-center style="width: 100%; color:white;"><span></span></div>
    </ion-item>




      <div [ngSwitch]="view.segment">

        <ion-list class="form " *ngSwitchCase="'login'" [formGroup]="loginForm">

          <ion-item>
            <ion-label>
              <ion-icon name="mail" item-start></ion-icon>|
            </ion-label>

            <ion-input placeholder="Correo" formControlName="user" [(ngModel)]="loginData.user" type="email" name="email">
            </ion-input>
          </ion-item>

          <ion-item>
            <ion-label>
              <ion-icon name="md-key" item-start></ion-icon>|
            </ion-label>

            <ion-input placeholder="Contraseña" formControlName="password" [(ngModel)]="loginData.password" type="password"
              name="password"></ion-input>
          </ion-item>

          <div >
            <button [disabled]="!loginForm.valid" ion-button color="primary"  block (click)="login()">
              <ion-spinner *ngIf="view.spinner.login" name="bubbles" color="white" padding-right></ion-spinner> &nbsp;
              {{view.login.text}}
            </button>
          </div>


<!-- 
          <ion-item text-center color="transparent">
            <span (click)="recover()">¿Has olvidado los datos de la cuenta?</span>
          </ion-item> -->


          <ion-item *ngIf="view.error" color="transparent" text-center>
            <span class="error">Datos incorrectos</span>
          </ion-item>
        </ion-list>

        <div *ngSwitchCase="'signup'" [formGroup]="signupForm">
          <ion-list *ngIf="view.signup" class="">

            <ion-item>
              <ion-input placeholder="Nombre" formControlName="name" name="name" [(ngModel)]="signupData.fullname" type="text"
                name="name"></ion-input>
            </ion-item>

            <ion-item>
              <ion-input placeholder="Correo" formControlName="email" name="email" [(ngModel)]="signupData.email" type="email"
                name="email"></ion-input>
            </ion-item>

            <ion-item>
              <ion-input placeholder="Teléfono" formControlName="cellphone" name="cellphone"
                [(ngModel)]="signupData.cellphone" type="number" name="phone"></ion-input>
            </ion-item>


            <div formControlName="usertype" name="usertype" [(ngModel)]="signupData.tipoid" radio-group>
              <ion-item>
                <ion-label>Asesor inmobiliario independiente</ion-label>
                <ion-radio value="11"></ion-radio>
              </ion-item>

              <ion-item>
                <ion-label>Empresa inmobiliaria</ion-label>
                <ion-radio value="12"></ion-radio>
              </ion-item>
            </div>

            <ion-item>
              <ion-input placeholder="Contraseña" formControlName="passOne" name="passOne" (keyup)="validate()"
                [(ngModel)]="signupData.passOne" type="text"></ion-input>
            </ion-item>

            <ion-item>
              <ion-input placeholder="Repita Contraseña" formControlName="passTwo" name="passTwo" (keyup)="validate()"
                [(ngModel)]="signupData.passTwo" type="text"></ion-input>
            </ion-item>

            <ion-item *ngIf="!passValidate" text-center>
              <p class="error">las contraseñas deben coincidir</p>
            </ion-item>

            <ion-item text-wrap text-center>
              <ion-label style="font-size: 10px !important; color:#2366b3;">
                Al hacer clic en Registrarse, acepta los <span style="color:#1a559a;" (click)="terms()">Términos y Condiciones
                </span> de Uso de Broknet.
              </ion-label>

            </ion-item>

            <ion-item *ngIf="view.errorSignup" text-center>
              <p class="error">El correo ya se encuentra registrado.</p>
            </ion-item>

            <ion-item *ngIf="view.errorSignupOther" text-center>
              <p class="error">Ocurrio un error, intenta mas tarde.</p>
            </ion-item>

            <div padding>
              <button [disabled]="!(signupForm.valid && passValidate)" ion-button color="primary" block (click)="signup()">
                <ion-spinner *ngIf="view.spinner.signup" name="bubbles" color="white" padding-right></ion-spinner> &nbsp;
                Registrarse
              </button>
            </div>

          </ion-list>

          <ion-list *ngIf="view.success" padding class="">
            <ion-item>

              <h2 text-center style="color:#3ac53a;">
                <ion-icon item-left name="md-checkmark-circle" color="green"></ion-icon>
                Listo!
              </h2>
            </ion-item>
            <p text-center>Enviamos los accesos a tu correo, inicia sesión para continuar con el registro.</p>

          </ion-list>
        </div>
      </div>

  </ion-list>

</ion-content> 